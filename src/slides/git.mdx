import { themes } from "mdx-deck";

export const theme = themes.dark;

# 我所理解的 Git

<div>By 贾超超</div>

<Notes>

曾经小伙伴们问过我很多 Git 相关的问题。

我意识到 Git 是我们日常工作中使用频率非常高的一个工具，理解 Git 对于我们来说非常重要。

于是就有了这个分享，希望对大家有帮助。

</Notes>

---

## Git 是什么？

一个分布式版本控制工具

[git-scm.com](https://git-scm.com)

<Notes>

首先，Git 是什么呢？

众所周知，Git 是一个分布式版本控制工具。

Git 的官方网站是 git-scm.com，你可以在这里找到很多好东西。

</Notes>

---

## 不忘初心：第一个问题

我们为什么要用版本控制工具？

<Notes>

这里我有两个问题？（不知道大家有没有考虑过？）

第一个问题是我们为什么要用版本控制工具？（这个大家应该比较熟悉）

版本控制工具会记录我们代码版本变化的历史，对吧？

然后我们可以通过这些历史记录去追溯一些东西。比如回退版本、排查问题，等等。

</Notes>

---

## 记录信息

谁、改了啥、有什么影响

<Notes>

我们一般是怎么追溯历史记录的呢？

看一个记录是 `谁、改了啥、有什么影响`

我们关心的这些东西，对应到记录中就是：用户信息、commit message、代码

- user info
- commit message
- code

</Notes>

---

## 用户信息

- username 用中文名。
- email 用邮箱。

[Git 如何配置多用户](https://)

<Notes>

- username 用中文名。
- email 用邮箱。

配置多个用户的方法有很多种。

- 通过 SSH 配置，对不同的域名进行区分。
- 通过 Git config，对不同的文件夹进行区分。

</Notes>

---

## commit message

- 格式上：遵守 commit message 格式规范
- 内容上：面向用户讲人话。

[commit message 规范](https://confluence.fiture.com/pages/viewpage.action?pageId=29624171)

[Ant Design 开源项目经验分享，Changelog 章节](https://developer.aliyun.com/article/754203)

<Notes>

1.描述用户第一现场的问题，而非你的解决方式

2.面向用户写人话

</Notes>

---

## 不忘初心：第二个问题

我们为什么要用 Git 作为我们的版本控制工具？

<Notes>

优点很突出，缺点不明显。

因为 Git 有很多优点。对于我们的应用场景来说，缺点又不太明显。

(当然 Git 也有很多缺点，但在我们的使用场景中，表现得并不明显。

所以 Git 给我们带来好处的同时并不会带来很大的问题。

当然这只是人们选择 Git 作为版本控制工具的原因之一。还有其他一些原因，与主题无关，因此不再展开讨论。)

</Notes>

---

## Git 的重要特性

- 分布式

- 基于快照

<Notes>

Git 有很多特性，优点缺点都来自于这些特性。我认为比较重要的有以下两个：

分布式让提交操作更顺畅。（提交操作，不需要联网）

快照机制让分支操作更顺畅。（只是增加一个指针）

</Notes>

---

## Git 的认知

- Git 的使用
- 如何理解 Git
- Git 的底层实现

<Notes>

为了能更好地使用和理解 Git，我花了很多时间去看文档、做实验。当然小伙伴们问我的问题，也是我做这个事情的强大动力。

我把对 Git 的认知分为三个方面。分别是：Git 的使用、如何理解 Git、Git 的底层实现。

由于时间有限，今天主要分享的是如何理解 Git。（因为我觉得它非常重要，比另外两个部分重要得多。）

</Notes>

---

## 进入主题

如何理解 Git

<Notes>

终于进入主题了。（希望大家听完之后能有所收获。）

由于是讲如何理解 Git，所以尽量不涉及到具体的命令。

（希望你下次使用 Git 的时候，发现所有的问题跟小学数学题没什么区别，拿出你的公式定理就可以把它们轻松解决掉了。

那就最好不过的了。）

</Notes>

---

## Git 使用的两个场景

- 本地使用
- 远程使用

<Notes>

Git 的两个使用场景

</Notes>

---

## 本地使用

**本地仓库是一个独立且完整的仓库。**

<Notes>

当然每个仓库都是独立且完整的仓库。

</Notes>

---

<img
  style={{ backgroundColor: "#666" }}
  src="https://i.loli.net/2021/03/04/OXj8WKn35NBPdyS.png"
  alt="Git 模型 - 本地.png"
/>

<Notes>

一个 Git 仓库可以分为三个区域：

- 仓库区
- 暂存区（索引区）
- 工作区

当然名字是人定的，你也可以叫它们：A 区域、B 区域、C 区域。

三个区域之间的交互。

- 开始：在工作区编写内容。
- add：将工作区的内容保存到暂存区
- commit：将暂存区的内容保存到仓库区，跟 add 不同，这里会产生一个记录。
- checkout：用仓库区的内容替换工作区的内容。

</Notes>

---

## 交互

interaction /ˌɪntə'rækʃən/

一起活动, 合作, 配合, 相互作用, 交互

<Notes>

刚刚提到了一个词：交互。

大家可以注意一下，后面会多次出现。

</Notes>

---

## 两个东西之间的交互

<ul>
  <Appear>
    <li>AB</li>
    <li>BA</li>
    <li>A</li>
    <li>B</li>
    <li>C</li>
  </Appear>
</ul>

东西：文件、快照、记录（commit）、分支、仓库、etc.

<Notes>

把两个东西变成一个东西，有几种结果？

- AB
- BA
- A
- B
- C

当然 AB、BA、C 也可以归类为一个 `既不是 A 也不是 B 的东西`

这都不重要，重要的是你想要的是什么。

</Notes>

---

## 重要的是你想要的是什么！

<Notes>

这可能是 Git 使用中最重要的一句话。

无论 A 和 B 的交互有多少种可能的结果，它最终的结果都应该只有一种，就是你想要的东西。

所以`你想要的是什么`，这个最重要。

所以要时刻清楚`你想要的是什么`（至少遇到问题的时候要想清楚）

</Notes>

---

## 分支之间的交互

- AB
- CD
- ABCD
- CDAB
- EFGH

文件之间的交互

<Notes>

- AB
- CD
- ABCD
- CDAB
- EFGH

- 基于
- 合并

它们本质：

- 文件之间的交互

</Notes>

---

## 分支之间的交互

DEMO [learngitbranching](https://learngitbranching.js.org/)

---

## 远程使用

仓库之间的交互

<Notes>

远程使用其实是仓库之间的交互。

因为我们了解过每个仓库都是独立且完整的仓库，且每个仓库都是平等的。

远程仓库对于它自己来说，也是一个本地仓库。

</Notes>

---

<img
  style={{ backgroundColor: "#666" }}
  src="https://i.loli.net/2021/01/27/tWn6umwel295PEX.png"
  alt="Git 模型.png"
/>

<Notes>

仓库之间都有哪些交互呢？

- 增加远端
- 获得远端镜像
- 基于远端的内容修改本地的内容
- 基于本地的内容修改远端的内容

它们本质：

- 分支之间的交互
- 文件之间的交互

## The End!

以上就是本次分享的主要内容

主要是我对 Git 的理解。因为能力有限，难免有理解不对的地方，还请大家批评指正。

</Notes>

---

## Git 的底层实现

- 并非严格地基于快照
- 远程仓库的镜像与本地仓库，不同的分支，它们在存储上并没有严格的边界
- etc.

[Pro Git（10. Git-内部原理）](https://git-scm.com/book/zh/v2/Git-%E5%86%85%E9%83%A8%E5%8E%9F%E7%90%86-%E5%BA%95%E5%B1%82%E5%91%BD%E4%BB%A4%E4%B8%8E%E4%B8%8A%E5%B1%82%E5%91%BD%E4%BB%A4)

<Notes>

关于另外两个方面，比如 Git 的底层实现，我觉得 Pro Git 讲得非常好。大家学有余力的话可以去看一下，第 10 章。

看完之后，你会发现 xxxx。

这部分我了解得也不多，就不展开了。

</Notes>

---

## 如何使用 Git：重点

要想清楚自己想要的是什么

<Notes>

- 要想清楚自己想要的最终结果是什么？

</Notes>

---

## 如何使用 Git：Git 命令

- Git 命令：[Pro Git（附录 C: Git 命令）](https://git-scm.com/book/zh/v2/%E9%99%84%E5%BD%95-C%3A-Git-%E5%91%BD%E4%BB%A4-%E8%AE%BE%E7%BD%AE%E4%B8%8E%E9%85%8D%E7%BD%AE)

- 命令行、GUI

[Git Reference - git-scm](https://git-scm.com/docs)

[Git GUI Clients - git-scm](https://git-scm.com/downloads/guis)

[Git GUI Clients - segmentfault](https://segmentfault.com/a/1190000022736553)

[Git GUI Clients - zhihu](https://www.zhihu.com/question/22932048)

<Notes>

- 使用 Git 命令 or GUI 工具告诉 Git。
- 至于怎么执行不用关心。
- 其实 Git 是基于快照的，很容易理解。基于差异的版本控制工具也是一样。不用关心怎么执行。

至于 Git 命令，记住一些常用的命令就可以了，可看一下 Pro Git 的附录 C。

当然不想记命令也没关系，有 GUI 工具。

也可以结合使用：Git 命令 + GUI 工具

- Tower
- SourceTree
- GitHub Desktop

</Notes>

---

## 如何使用 Git：Git 协作规范

- Git 协作规范

<Notes>

Git 灵活且强大，每个人的使用习惯都不一样。

团队协作需要一致性，一致性有很多好处。

因此需要一些协作规范来保证一致性。

## The End!

以上就是本次分享的全部内容。

</Notes>

---

## 参考链接

[Git ](https://git-scm.com/)

[Git Reference](https://git-scm.com/docs)

[Pro Git](https://git-scm.com/book/en/v2)

<Notes>

- Git 的官方网站
- Git API 文档
- Pro Git 这本书，真的是开源免费、质量上乘。

</Notes>

---

## 谢谢大家！
